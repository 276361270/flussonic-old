-module(mp4_tests).
-include_lib("eunit/include/eunit.hrl").





keyframes_test() ->
  {ok, F} = file:open("../../../priv/bunny.mp4", [read,binary,raw]),
  {ok, R} = mp4:open({file,F}, []),
  [io:format("{~B,~B},~n", [round(T),I]) || {T,I} <- mp4:keyframes(R, [1,2])],
  ?assertEqual([{0,0},{2000,142},{4000,284},{6000,426},{8000,567},
{10000,709},{11875,842},{13875,984},{15750,1117},{17750,1259},{19750,1400},
{21750,1542},{23042,1634},{25042,1775},{27042,1917},{29042,2059},{31042,2201},{33042,2342},
{35042,2484},{37042,2626},{39042,2768},{41042,2909},{43042,3051},{45042,3193},{47042,3335},
{49042,3476},{51042,3618},{53042,3760},{55042,3902},{56083,3975},{58083,4117}], 
[{round(T), I} || {T,I} <- mp4:keyframes(R, [1,2])]),
  ok.



